# pre-commit-terraform hook

| Repo | Badges info |
| ---- | ---- |
| [This fork](https://github.com/devops-workflow/pre-commit-terraform) | [![Github release](https://img.shields.io/github/release/devops-workflow/pre-commit-terraform.svg)](https://github.com/devops-workflow/pre-commit-terraform/releases) |
| [Upstream](https://github.com/antonbabenko/pre-commit-terraform) | [![Github tag](https://img.shields.io/github/tag/antonbabenko/pre-commit-terraform.svg)](https://github.com/antonbabenko/pre-commit-terraform/releases) ![](https://img.shields.io/maintenance/yes/2018.svg) [![Help Contribute to Open Source](https://www.codetriage.com/antonbabenko/pre-commit-terraform/badges/users.svg)](https://www.codetriage.com/antonbabenko/pre-commit-terraform) |

Several [pre-commit](http://pre-commit.com/) hooks to keep Terraform configurations (both `*.tf` and `*.tfvars`) in a good shape:
* `terraform_docs` - Inserts input and output documentation into `README.md`.
* `terraform_fmt` - Rewrites all Terraform configuration files to a canonical format.
* `terraform_graph` - Generates resource graph and inserts into `README.md`
* `terraform_tools` - Install and update all tools required by hooks in this repo
* `terraform_validate_no_variables` - Validates all Terraform configuration files without checking whether all required variables were set.
* `terraform_validate_with_variables` - Validates all Terraform configuration files and checks whether all required variables were specified.
* `tflint` - Lint check Terraform files

## Notes about hooks

1. `terraform_validate_no_variables` and `terraform_validate_with_variables` will not work if variables are being set dynamically (eg, when using [Terragrunt](https://github.com/gruntwork-io/terragrunt)). Use `terragrunt validate` command instead.

1. `terraform_docs` will insert/update documentation generated by [terraform-docs](https://github.com/segmentio/terraform-docs) between markers - `<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->` and `<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->` if they are present in `README.md`. Make sure that `terraform-docs` is installed.

## Example

`.pre-commit-config.yaml`:

```yaml
repos:
  - repo: https://github.com/devops-workflow/pre-commit-terraform
    rev: v1.12.0
    hooks:
      - id: terraform_tools
      - id: terraform_fmt
      - id: terraform_docs
      - id: terraform_graph
      - id: tflint
```

Enjoy the clean and documented code!
